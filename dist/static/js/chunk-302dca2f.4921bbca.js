(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-302dca2f"],{"099a":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-nav-bar"},[n("nav-bar",[n("div",{staticClass:"left",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"},[n("img",{staticClass:"back-icon",attrs:{src:r("7ea1"),alt:""}})]),n("div",{staticClass:"title",attrs:{slot:"center"},slot:"center"},[t._v(" "+t._s(t.title)+" ")])])],1)},a=[],s=r("a7ac"),c={name:"MainNavBar",components:{NavBar:s["a"]},props:{title:{type:String,default:""}},data:function(){return{fromUrl:""}},beforeRouteEnter:function(t,e,r){r((function(t){t.fromUrl=e.fullPath}))},methods:{goBack:function(){this.$router.go(-1)}}},i=c,o=(r("6aec"),r("2877")),l=Object(o["a"])(i,n,a,!1,null,"779151a0",null);e["a"]=l.exports},"0c13":function(t,e,r){"use strict";var n=r("1e4b"),a=r.n(n);a.a},"1e4b":function(t,e,r){},"25f0":function(t,e,r){"use strict";var n=r("6eeb"),a=r("825a"),s=r("d039"),c=r("ad6d"),i="toString",o=RegExp.prototype,l=o[i],u=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=i;(u||d)&&n(RegExp.prototype,i,(function(){var t=a(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in o)?c.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},"2a89":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"delect-container"},[r("div",{staticClass:"mask"}),r("div",{staticClass:"delect-content"},[t._t("content"),r("div",{staticClass:"delect-btn"},[r("div",{staticClass:"cancel",on:{click:t.cancelDel}},[t._v("取消")]),r("div",{staticClass:"confirm",on:{click:t.confirmDel}},[t._v("确认")])])],2)])},a=[],s={name:"Delect",methods:{cancelDel:function(){this.$emit("cancelDel")},confirmDel:function(){this.$emit("confirmDel")}}},c=s,i=(r("ad80"),r("2877")),o=Object(i["a"])(c,n,a,!1,null,"756f5938",null);e["a"]=o.exports},"2dd4":function(t,e,r){t.exports=r.p+"static/img/backTop.8c4b8c7e.svg"},3527:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-end"},[t._v(" 就到这里吧！我可是有底线的呢！ ")])},a=[],s={name:"PageEnd"},c=s,i=(r("bac2"),r("2877")),o=Object(i["a"])(c,n,a,!1,null,"e84fd056",null);e["a"]=o.exports},"4d63":function(t,e,r){var n=r("83ab"),a=r("da84"),s=r("94ca"),c=r("7156"),i=r("9bf2").f,o=r("241c").f,l=r("44e7"),u=r("ad6d"),d=r("6eeb"),f=r("d039"),p=r("2626"),v=r("b622"),h=v("match"),m=a.RegExp,g=m.prototype,b=/a/g,O=/a/g,_=new m(b)!==b,y=n&&s("RegExp",!_||f((function(){return O[h]=!1,m(b)!=b||m(O)==O||"/a/i"!=m(b,"i")})));if(y){var C=function(t,e){var r=this instanceof C,n=l(t),a=void 0===e;return!r&&n&&t.constructor===C&&a?t:c(_?new m(n&&!a?t.source:t,e):m((n=t instanceof C)?t.source:t,n&&a?u.call(t):e),r?this:g,C)},T=function(t){t in C||i(C,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},w=o(m),k=0;while(w.length>k)T(w[k++]);g.constructor=C,C.prototype=g,d(a,"RegExp",C)}p("RegExp")},"52c7":function(t,e,r){"use strict";var n=r("54e6"),a=r.n(n);a.a},5377:function(t,e,r){},"54e6":function(t,e,r){},6892:function(t,e,r){},"6aec":function(t,e,r){"use strict";var n=r("6892"),a=r.n(n);a.a},"6e4f":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"back-top"},[n("img",{staticClass:"back-top-icon",attrs:{src:r("2dd4"),alt:""}})])}],s={name:"BackTop"},c=s,i=(r("aa53"),r("2877")),o=Object(i["a"])(c,n,a,!1,null,"39af67da",null),l=o.exports,u={data:function(){return{positionY:0}},components:{BackTop:l},computed:{showBackTop:function(){return this.positionY<-800}},methods:{scroll:function(t){this.positionY=t.y},backTop:function(){this.$refs.scroll.scrollTo(0,0,500)}}};e["a"]=u},"77a1":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-list"},[r("main-nav-bar",{attrs:{title:"我的订单"}}),r("order-nav-bar",{attrs:{orderNavList:t.orderNavList,currentOrderType:t.currentOrderType},on:{changeOrderType:t.changeOrderType}}),r("scroll",{ref:"scroll",staticClass:"order-content",attrs:{probeType:3},on:{scroll:t.scroll}},[r("order-list-content",{attrs:{orderList:t.orderList},on:{showDelete:t.showDelete,cancelOrder:t.cancelOrder,confirmOrder:t.confirmOrder}}),r("page-end")],1),r("delect",{directives:[{name:"show",rawName:"v-show",value:t.isDelete,expression:"isDelete"}],on:{cancelDel:t.cancelDel,confirmDel:t.confirmDel}},[r("div",{staticClass:"delect-header",attrs:{slot:"content"},slot:"content"},[t._v("确定要删除吗？")])]),r("back-top",{directives:[{name:"show",rawName:"v-show",value:t.showBackTop,expression:"showBackTop"}],nativeOn:{click:function(e){return t.backTop(e)}}})],1)},a=[],s=(r("e25e"),r("099a")),c=r("2a89"),i=r("3527"),o=r("5d17"),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-nav-bar"},[r("ul",{staticClass:"nav-list"},t._l(t.orderNavList,(function(e){return r("li",{key:e.type,staticClass:"nav-item",class:{active:e.type==t.currentOrderType},on:{click:function(r){return t.changeOrderType(e.type)}}},[t._v(t._s(e.title))])})),0)])},u=[],d=(r("a9e3"),{name:"OrderNavBar",props:{orderNavList:{type:Array,default:function(){return[]}},currentOrderType:{type:Number,default:0}},methods:{changeOrderType:function(t){this.$emit("changeOrderType",t)}}}),f=d,p=(r("52c7"),r("2877")),v=Object(p["a"])(f,l,u,!1,null,"5e162db3",null),h=v.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"order-list-content"},[t.orderList.length?n("ul",{staticClass:"order-list"},t._l(t.orderList,(function(e){return n("li",{key:e.tradeId,staticClass:"order-item"},[n("div",{staticClass:"order-item-header"},[n("p",{staticClass:"trade-no"},[t._v("订单编号:"+t._s(e.tradeNo))]),n("p",{staticClass:"trade-type"},[t._v(t._s(t._f("tradeType")(e.tradeStatus))+" "),1==e.tradeStatus||11==e.tradeStatus||0==e.tradeStatus?n("img",{staticClass:"icon",attrs:{src:r("7952"),alt:""},on:{click:function(r){return t.showDelete(e.tradeId)}}}):t._e()])]),t._l(e.orderGoods,(function(r){return n("div",{key:r.goodsId,staticClass:"order-item-content",on:{click:function(r){return t.toOrderDetailPage(e.tradeNo)}}},[n("img",{staticClass:"goods-img",attrs:{src:r.goodsImgUrl,alt:""}}),n("div",{staticClass:"goods-desc"},[n("p",{staticClass:"title text-overflow2"},[t._v(t._s(r.tradeName))]),n("p",{staticClass:"unit"},[t._v("规格:"+t._s(r.unit))])]),n("div",{staticClass:"price"},[n("p",{staticClass:"sell-price"},[t._v("￥"+t._s(r.sellPrice.toFixed(2)))]),n("p",{staticClass:"sell-count"},[t._v("×"+t._s(r.sellCount))])])])})),n("div",{staticClass:"order-item-bottom"},[n("p",{staticClass:"end-time"},[t._v(t._s(t.filterEndTime(e.endTime,"YYYY-MM-dd")))]),n("p",{staticClass:"total"},[n("span",{staticClass:"num-total"},[t._v("共"+t._s(t.numTotal(e.orderGoods))+"件")]),n("span",{staticClass:"rcv-total"},[t._v("应付总额:"),n("span",{staticClass:"price-total"},[t._v("￥"+t._s(e.rcvTotal.toFixed(2)))])])])]),1==e.tradeStatus?n("div",{staticClass:"control-btn"},[n("div",{staticClass:"btn cancel-btn",on:{click:function(r){return t.cancelOrder(e.tradeNo)}}},[t._v("取消订单")]),n("div",{staticClass:"btn pay-btn",on:{click:function(r){return t.goToPay(e.tradeNo)}}},[t._v("去付款")])]):7==e.tradeStatus?n("div",{staticClass:"control-btn"},[n("div",{staticClass:"btn check-btn"},[t._v("查看物流")]),n("div",{staticClass:"btn confirm-btn",on:{click:function(r){return t.confirmOrder(e.tradeId)}}},[t._v("确认收货")])]):11==e.tradeStatus?n("div",{staticClass:"control-btn"},[n("div",{staticClass:"btn check-btn"},[t._v("查看物流")])]):t._e()],2)})),0):n("img",{staticClass:"no-img",attrs:{src:"http://www.weinihaigou.com/m-images/no-order.png",alt:""}})])},g=[],b=r("cafd"),O=r("e05b"),_={name:"OrderListContent",props:{orderList:{type:Array,default:function(){return[]}}},filters:{tradeType:function(t){switch(t){case"0":return"交易关闭";case"1":return"等待付款";case"2":return"待发货";case"7":return"已发货";case"11":return"交易成功";default:break}}},methods:{filterEndTime:function(t,e){return Object(b["a"])(new Date(t),e)},numTotal:function(t){return t.reduce((function(t,e){return t+e.sellCount}),0)},showDelete:function(t){this.$emit("showDelete",t)},cancelOrder:function(t){this.$emit("cancelOrder",t)},confirmOrder:function(t){this.$emit("confirmOrder",t)},toOrderDetailPage:function(t){this.$router.push("/orderDetail?tradeNo="+t)},goToPay:function(t){var e=this,r=4;Object(O["c"])({tradeNo:t,payStatus:r}).then((function(t){console.log(t),1==t.success?window.location.href=t.result:e.$toast.show(t.msg,1500)}))}}},y=_,C=(r("0c13"),Object(p["a"])(y,m,g,!1,null,"68f6bd75",null)),T=C.exports,w=r("6e4f"),k={name:"OrderList",components:{MainNavBar:s["a"],Scroll:o["a"],Delect:c["a"],PageEnd:i["a"],OrderNavBar:h,OrderListContent:T},mixins:[w["a"]],data:function(){return{currentOrderType:null,orderList:[],orderNavList:[{type:0,title:"全部"},{type:1,title:"待付款"},{type:2,title:"待发货"},{type:3,title:"待收货"},{type:4,title:"已完成"}],isDelete:!1,delTradeId:null}},created:function(){console.log(this.$route.query.type),this.currentOrderType=parseInt(this.$route.query.type),this.getOrderList(this.currentOrderType)},methods:{getOrderList:function(t){var e=this;Object(O["b"])(t).then((function(t){e.orderList=t.result,console.log(t)})).catch((function(t){console.log(t)}))},changeOrderType:function(t){this.currentOrderType=t,this.getOrderList(this.currentOrderType)},showDelete:function(t){this.isDelete=!0,this.delTradeId=t},cancelDel:function(){this.isDelete=!1},confirmDel:function(){var t=this;Object(O["a"])({tradeIds:this.delTradeId}).then((function(e){e.success?(t.getOrderList(t.currentOrderType),t.isDelete=!1):t.$toast.show(e.message,1500)}))},cancelOrder:function(t){var e=this;Object(O["f"])({tradeNo:t}).then((function(t){t.success?(e.getOrderList(e.currentOrderType),e.$toast.show("订单取消成功",1500)):e.$toast.show("订单取消失败",1500)}))},confirmOrder:function(t){var e=this;Object(O["e"])({tradeId:t}).then((function(t){t.success?(e.getOrderList(e.currentOrderType),e.$toast.show("确认收货成功",1500)):e.$toast.show("确认收货失败",1500)}))}}},D=k,x=(r("b533"),Object(p["a"])(D,n,a,!1,null,"0b29a285",null));e["default"]=x.exports},7952:function(t,e,r){t.exports=r.p+"static/img/delect.66008782.svg"},"7ea1":function(t,e,r){t.exports=r.p+"static/img/left.2ebaad22.svg"},a337:function(t,e,r){},aa53:function(t,e,r){"use strict";var n=r("e6a6"),a=r.n(n);a.a},ad80:function(t,e,r){"use strict";var n=r("5377"),a=r.n(n);a.a},b533:function(t,e,r){"use strict";var n=r("a337"),a=r.n(n);a.a},bac2:function(t,e,r){"use strict";var n=r("eddd"),a=r.n(n);a.a},cafd:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("4d63"),r("25f0"),r("5319");function n(t,e){/(Y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in r){var a=new RegExp("(".concat(n,")"));if(a.test(e)){var s=r[n]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:("00"+s).substr(s.length))}}return e}},e05b:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"f",(function(){return s})),r.d(e,"e",(function(){return c})),r.d(e,"a",(function(){return i})),r.d(e,"d",(function(){return o})),r.d(e,"c",(function(){return l}));var n=r("1bab");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(n["a"])({url:"/ord/orderMo.shtml",params:{type:t},method:"post"})}function s(t){return Object(n["a"])({url:"/trade/updateTrade.shtml",params:t,method:"post"})}function c(t){return Object(n["a"])({url:"/ord/updateStatus.shtml",params:t,method:"post"})}function i(t){return Object(n["a"])({url:"/ord/delTrade.shtml",params:t,method:"post"})}function o(t){return Object(n["a"])({url:"/ord/tradeMoDetail.shtml",params:t,method:"post"})}function l(t){return Object(n["a"])({url:"/trade/toPay.shtml",params:t,method:"post"})}},e25e:function(t,e,r){var n=r("23e7"),a=r("e583");n({global:!0,forced:parseInt!=a},{parseInt:a})},e583:function(t,e,r){var n=r("da84"),a=r("58a8").trim,s=r("5899"),c=n.parseInt,i=/^[+-]?0[Xx]/,o=8!==c(s+"08")||22!==c(s+"0x16");t.exports=o?function(t,e){var r=a(String(t));return c(r,e>>>0||(i.test(r)?16:10))}:c},e6a6:function(t,e,r){},eddd:function(t,e,r){}}]);
//# sourceMappingURL=chunk-302dca2f.4921bbca.js.map