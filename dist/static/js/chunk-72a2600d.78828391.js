(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72a2600d"],{"0782":function(t,e,n){"use strict";var s=n("56e5"),o=n.n(s);o.a},"19bd":function(t,e,n){"use strict";var s=n("7355"),o=n.n(s);o.a},"202b":function(t,e,n){},"2a89":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"delect-container"},[n("div",{staticClass:"mask"}),n("div",{staticClass:"delect-content"},[t._t("content"),n("div",{staticClass:"delect-btn"},[n("div",{staticClass:"cancel",on:{click:t.cancelDel}},[t._v("取消")]),n("div",{staticClass:"confirm",on:{click:t.confirmDel}},[t._v("确认")])])],2)])},o=[],a={name:"Delect",methods:{cancelDel:function(){this.$emit("cancelDel")},confirmDel:function(){this.$emit("confirmDel")}}},c=a,i=(n("ad80"),n("2877")),u=Object(i["a"])(c,s,o,!1,null,"756f5938",null);e["a"]=u.exports},"2d8e":function(t,e,n){},"498a":function(t,e,n){"use strict";var s=n("23e7"),o=n("58a8").trim,a=n("e070");s({target:"String",proto:!0,forced:a("trim")},{trim:function(){return o(this)}})},5377:function(t,e,n){},"56e5":function(t,e,n){},6251:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return u}));var s=n("1bab");function o(){return Object(s["a"])({url:"/active/getNotice.shtml",method:"post"})}function a(){return Object(s["a"])({url:"/ord/myTradeCount.shtml",method:"post"})}function c(t){return Object(s["a"])({url:"/coupon/getMyConpou.shtml",params:t,method:"post"})}function i(){return Object(s["a"])({url:"/user/loginOut.shtml",method:"post"})}function u(t){return Object(s["a"])({url:"/coupon/getConpouByCode.shtml",params:t,method:"post"})}},7355:function(t,e,n){},ad80:function(t,e,n){"use strict";var s=n("5377"),o=n.n(s);o.a},e070:function(t,e,n){var s=n("d039"),o=n("5899"),a="​᠎";t.exports=function(t){return s((function(){return!!o[t]()||a[t]()!=a||o[t].name!==t}))}},e83d:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"coupon"},[n("coupon-nav-bar",{attrs:{title:"优惠券"},on:{changeBtn:t.changeBtn}}),n("coupon-tab-bar",{attrs:{conpouTypeList:t.conpouTypeList,currentType:t.currentType},on:{changeCouponType:t.changeCouponType}}),n("scroll",{ref:"scroll",staticClass:"coupon-content",attrs:{probeType:3,pullUpLoad:!0},on:{scroll:t.scroll,pullingUp:t.pullingUp}},[n("coupon-list",{attrs:{conpouList:t.conpouList}}),t.conpouList.length<=0?n("img",{staticClass:"no-img",attrs:{src:"http://www.weinihaigou.com/m-images/com-no-num.png",alt:""}}):t._e(),!t.hasNextPage&&t.conpouList.length>0?n("page-end"):t._e()],1),n("delect",{directives:[{name:"show",rawName:"v-show",value:t.isChange,expression:"isChange"}],on:{cancelDel:t.cancelDel,confirmDel:t.confirmDel}},[n("div",{staticClass:"delect-header",attrs:{slot:"content"},slot:"content"},[n("p",{staticClass:"title"},[t._v("兑换优惠券")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"change-input",attrs:{type:"text"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}})])])],1)},o=[],a=(n("498a"),n("2909")),c=n("6251"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-nav-bar"},[s("nav-bar",[s("div",{staticClass:"left",attrs:{slot:"left"},on:{click:t.goBack},slot:"left"},[s("img",{staticClass:"back-icon",attrs:{src:n("7ea1"),alt:""}})]),s("div",{staticClass:"title",attrs:{slot:"center"},slot:"center"},[t._v(" "+t._s(t.title)+" ")]),s("div",{staticClass:"exchange",attrs:{slot:"right"},on:{click:t.changeBtn},slot:"right"},[t._v(" 兑换 ")])])],1)},u=[],r=n("a7ac"),l={name:"CouponNavBar",components:{NavBar:r["a"]},props:{title:{type:String,default:""}},methods:{goBack:function(){this.$router.go(-1)},changeBtn:function(){this.$emit("changeBtn")}}},p=l,h=(n("0782"),n("2877")),m=Object(h["a"])(p,i,u,!1,null,"cd72b95a",null),f=m.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"coupon-tab-bar"},[n("ul",{staticClass:"nav-list"},t._l(t.conpouTypeList,(function(e){return n("li",{key:e.status,staticClass:"nav-item",class:{active:e.status==t.currentType},on:{click:function(n){return t.changeCouponType(e.status)}}},[t._v(t._s(e.title))])})),0)])},g=[],C=(n("a9e3"),{name:"OrderNavBar",props:{conpouTypeList:{type:Array,default:function(){return[]}},currentType:{type:Number,default:0}},methods:{changeCouponType:function(t){this.$emit("changeCouponType",t)}}}),v=C,b=(n("19bd"),Object(h["a"])(v,d,g,!1,null,"111150e3",null)),y=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"coupon-list"},[t.conpouList.length>0?n("ul",{staticClass:"coupon-list-content"},t._l(t.conpouList,(function(e){return n("li",{key:e.couponId,staticClass:"coupon-item"},[n("img",{staticClass:"coupon-item-bg",attrs:{src:0==e.status?"http://www.weinihaigou.com/m-images/coupon1.png":"http://www.weinihaigou.com/m-images/coupon2.png",alt:""}}),n("div",{staticClass:"coupon-item-content"},[n("div",{staticClass:"coupon-desc"},[n("p",{staticClass:"coupon-name"},[t._v(t._s(e.couponName))]),n("div",{staticClass:"use-limit"},[n("p",{staticClass:"amount"},[t._v("满"+t._s(e.amount)+"可用")]),n("p",{staticClass:"coupon-tag"},[t._v(t._s(e.couponTag))])])]),n("div",{staticClass:"time"},[n("p",[t._v(t._s(e.startTime+"-"+e.endTime))]),n("p",[t._v(t._s(t._f("conpouType")(e.status)))])])])])})),0):t._e()])},T=[],w={name:"CouponList",props:{conpouList:{type:Array,default:function(){return[]}}},filters:{conpouType:function(t){switch(t){case 0:return"未使用";case 1:return"已使用";case 2:return"已过期";default:break}}}},L=w,N=(n("f611"),Object(h["a"])(L,_,T,!1,null,"2b1c0ea3",null)),x=N.exports,k=n("5d17"),O=n("2a89"),$=n("3527"),B=n("6e4f"),D={name:"Coupon",components:{Scroll:k["a"],Delect:O["a"],PageEnd:$["a"],CouponNavBar:f,CouponTabBar:y,CouponList:x},mixins:[B["a"]],data:function(){return{pageNum:1,status:0,conpouList:[],conpouTypeList:[{status:0,title:"未使用"},{status:1,title:"已使用"},{status:2,title:"已过期"}],currentType:0,hasNextPage:!0,isChange:!1,couponCode:""}},created:function(){this.getConpouList({pageNum:this.pageNum,status:this.currentType})},methods:{getConpouList:function(t){var e=this;Object(c["b"])(t).then((function(t){var n;console.log(t),(n=e.conpouList).push.apply(n,Object(a["a"])(t.result.userConpouList.list)),e.hasNextPage=t.result.userConpouList.hasNextPage,e.$refs.scroll.refresh(),e.$refs.scroll.finishPullUp()})).catch((function(t){console.log(t)}))},pullingUp:function(){this.hasNextPage&&(this.pageNum+=1,this.getConpouList({pageNum:this.pageNum,status:this.currentType}))},changeCouponType:function(t){this.currentType=t,this.pageNum=1,this.conpouList=[],this.getConpouList({pageNum:this.pageNum,status:this.currentType})},changeBtn:function(){this.isChange=!0},cancelDel:function(){this.isChange=!1},confirmDel:function(){var t=this;""==this.couponCode.trim()?this.$toast.show("请输入兑换码",1500):Object(c["a"])({tattedCode:this.couponCode}).then((function(e){e.success?(t.$toast.show("兑换成功",1500),t.isChange=!1,t.getConpouList({pageNum:t.pageNum,status:t.currentType})):t.$toast.show(e.message,1500)}))}}},j=D,P=(n("f28b"),Object(h["a"])(j,s,o,!1,null,"58350f08",null));e["default"]=P.exports},f28b:function(t,e,n){"use strict";var s=n("202b"),o=n.n(s);o.a},f611:function(t,e,n){"use strict";var s=n("2d8e"),o=n.n(s);o.a}}]);
//# sourceMappingURL=chunk-72a2600d.78828391.js.map